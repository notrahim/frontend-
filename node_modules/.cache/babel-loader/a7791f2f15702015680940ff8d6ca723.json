{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport axios from \"axios\";\nexport default {\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      alert: [],\n      values: [],\n      suivi_formalite: [],\n      formaliteName: '',\n      dateAction: ''\n    }, _defineProperty(_ref, \"formaliteName\", ''), _defineProperty(_ref, \"companyName\", ''), _defineProperty(_ref, \"status\", ''), _defineProperty(_ref, \"datesArray\", []), _ref;\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.fetchData();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    fetchData: function fetchData() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var headers, suivi_formalite;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                headers = {\n                  authorization: \"Bearer \" + _this2.$store.state.auth.user.token\n                };\n                _context2.next = 4;\n                return axios.get(\"task\", {\n                  headers: headers\n                });\n\n              case 4:\n                suivi_formalite = _context2.sent;\n                _this2.suivi_formalite = suivi_formalite.data;\n                _this2.eventsObjects = suivi_formalite.data.map(function (value) {\n                  return {\n                    date: value.day\n                  };\n                });\n                _this2.alert = _this2.eventsObjects.filter(function (value) {\n                  return value.date;\n                });\n                console.log(\"Alert\", _this2.alert);\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 11]]);\n      }))();\n    },\n    getDifferenceInDays: function getDifferenceInDays(b) {\n      var date1 = new Date();\n      var date2 = new Date(b);\n      var diffdata = Math.abs(date2 - date1);\n      var diffDays = Math.ceil(diffdata / (1000 * 60 * 60 * 24));\n\n      if (date1 < date2) {\n        return \"Il vous reste \".concat(diffDays, \" jours\");\n      } else {\n        return \"\".concat(diffDays, \" jours de retard\");\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;AAsBA;AAEA;EACAA,IADA,kBACA;IAAA;;IAAA;MAEAC,SAFA;MAGAC,UAHA;MAIAC,mBAJA;MAKAC,iBALA;MAMAC;IANA,0CAOA,EAPA,wCAQA,EARA,mCASA,EATA,uCAUA,EAVA;EAYA,CAbA;EAcAC,OAdA,qBAcA;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA,iBADA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA,CAhBA;EAiBAC;IACAC,SADA,uBACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC,OAFA,GAEA;kBACAC;gBADA,CAFA;gBAAA;gBAAA,OAKAC;kBACAF;gBADA,EALA;;cAAA;gBAKAN,eALA;gBAQA;gBACA,iEACA;kBACA;oBACAS;kBADA;gBAGA,CALA;gBAMA;kBAAA;gBAAA;gBACAC;gBAhBA;gBAAA;;cAAA;gBAAA;gBAAA;gBAkBAA;;cAlBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAqBA,CAtBA;IAuBAC,mBAvBA,+BAuBAC,CAvBA,EAuBA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;EAjCA;AAjBA","names":["data","alert","values","suivi_formalite","formaliteName","dateAction","mounted","methods","fetchData","headers","authorization","axios","date","console","getDifferenceInDays","b"],"sourceRoot":"src/views","sources":["FormalityAlert.vue"],"sourcesContent":["<template>\n  <v-container>\n  <v-card \n    width=\"400\" \n    height=\"100%\" \n    class=\"rounded-xl pa-5 ma-5\" \n    :elevation=\"12\" \n    v-for=\"project in suivi_formalite\" \n    :key=\"project.id\">\n    <v-row align=\"center\" class=\"justify-space-between\">\n      <div>\n      <v-card-title class=\"font-weight-black py-0\">{{project.company}}</v-card-title>\n      <v-card-text class=\"py-0\">{{project.task}}</v-card-text>\n    </div> \n      <v-chip color=\"accent\" class=\"font-weight-black\">{{getDifferenceInDays(project.day)}}</v-chip>\n  </v-row>\n  </v-card>\n</v-container>\n</template>\n\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data(){ return {\n\n    alert:[],\n    values:[],\n    suivi_formalite:[],\n    formaliteName:'',\n    dateAction:'',\n    formaliteName:'',\n    companyName:'',\n    status:'',\n    datesArray: [],\n  \n  }},\n   async mounted() {\n       await this.fetchData()\n  },\n  methods: {\n    async fetchData() {\n      try {\n        const headers = {\n          authorization: \"Bearer \" + this.$store.state.auth.user.token,\n        };\n        let suivi_formalite = await axios.get(\"task\", {\n          headers,\n        });\n          this.suivi_formalite = suivi_formalite.data\n          this.eventsObjects = suivi_formalite.data.map(function (value) \n        {\n        return {\n          date : value.day,\n        };\n      });\n      this.alert = this.eventsObjects.filter((value) => value.date )\n      console.log(\"Alert\" , this.alert)\n      }catch (error) {\n          console.log(error)\n      }\n\n    },\n    getDifferenceInDays(b) {\n      const date1 = new Date()\n      const date2 = new Date(b)\n      const diffdata = Math.abs(date2- date1)\n      const diffDays = Math.ceil(diffdata / (1000 * 60 * 60 * 24)); \n      if (date1 < date2){\n        return `Il vous reste ${diffDays} jours`\n      } else {\n          return `${diffDays} jours de retard`\n      }\n    }   \n  },\n};\n</script>\n\n<style>\n.chart {\n  width: 100%;\n  height: 400px;\n}\n\n.project.true{\nborder-left: 4px solid green;\n}\n.project.false{\nborder-left: 4px solid red\n}\n\n</style>\n```"]},"metadata":{},"sourceType":"module"}