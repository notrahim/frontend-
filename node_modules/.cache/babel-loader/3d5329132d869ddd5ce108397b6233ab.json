{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport axios from \"axios\";\nimport { mapActions } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      mode: \"login\",\n      registerRes: {},\n      mode1: \"data\",\n      checkbox: false,\n      visiblePass: true,\n      type: \"password\",\n      form: {\n        email: \"\",\n        password: \"\"\n      },\n      name: \"\",\n      firstname: \"\",\n      denomination: \"\",\n      street: \"\",\n      city: \"\",\n      postal: \"\",\n      phone: \"\",\n      showError: false\n    };\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions([\"LogIn\"])), {}, {\n    submit: function submit() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return _this.LogIn(_this.form);\n\n              case 3:\n                _this.$router.push(\"/Dashboard\");\n\n                _this.showError = false;\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                _this.showError = true;\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 7]]);\n      }))();\n    },\n    //  ...mapActions([\"Register\"]),\n    register: function register() {\n      var _this2 = this;\n\n      axios.post(\"user/signup\", this.form).then(function (res) {\n        _this2.registerRes = res.data;\n        console.log(_this2.registerRes, \"register response\"); //this.$router.push(\"/Dashboard\");\n\n        _this2.showError = false;\n\n        _this2.switchToinfos();\n      })[\"catch\"](function (e) {\n        alert(\"Something went wrong in registration\");\n        _this2.showError = true;\n      });\n    },\n    goToHome: function goToHome() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return _this3.LogIn(_this3.form);\n\n              case 3:\n                _this3.$router.push(\"/Dashboard\");\n\n                _this3.showError = false;\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                _this3.showError = true;\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }))();\n    },\n    switchToCreateAccount: function switchToCreateAccount() {\n      this.mode = \"create\";\n    },\n    switchToLogin: function switchToLogin() {\n      this.mode = \"login\";\n    },\n    switchToinfos: function switchToinfos() {\n      this.mode = \"infos\";\n    },\n    handleSubmit: function handleSubmit() {\n      var _this4 = this;\n\n      var data = {\n        lastname: this.name,\n        firstname: this.firstname,\n        denomination: this.denomination,\n        street: this.street,\n        city: this.city,\n        postal: this.postal,\n        phone: this.phone,\n        userId: this.registerRes.userId\n      };\n      var headers = {\n        authorization: \"Bearer \" + this.registerRes.token\n      };\n      console.log(data);\n      axios.post(\"/fiche\", data, {\n        headers: headers\n      }).then(function (res) {\n        _this4.submit()[\"catch\"](function (e) {\n          return console.error(e);\n        });\n\n        console.log(res);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    }\n  })\n};","map":{"version":3,"mappings":";;;;AAmOA;AACA;AACA;EACAA;IAAA;MACAC,aADA;MAEAC,eAFA;MAGAC,aAHA;MAIAC,eAJA;MAKAC,iBALA;MAMAC,gBANA;MAOAC;QACAC,SADA;QAEAC;MAFA,CAPA;MAYAC,QAZA;MAaAC,aAbA;MAcAC,gBAdA;MAeAC,UAfA;MAgBAC,QAhBA;MAiBAC,UAjBA;MAkBAC,SAlBA;MAoBAC;IApBA;EAAA,CADA;EAuBAC,yCACAC,qBADA;IAEAC,MAFA,oBAEA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA,uBAFA;;cAAA;gBAGA;;gBACA;gBAJA;gBAAA;;cAAA;gBAAA;gBAAA;gBAMA;;cANA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQA,CAVA;IAWA;IACAC,QAZA,sBAYA;MAAA;;MAEAC;QACA;QACAC,qDAFA,CAGA;;QACA;;QACA;MACA,CANA,WAMA;QACAC;QACA;MACA,CATA;IAYA,CA1BA;IA2BAC,QA3BA,sBA2BA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA,yBAFA;;cAAA;gBAGA;;gBACA;gBAJA;gBAAA;;cAAA;gBAAA;gBAAA;gBAMA;;cANA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQA,CAnCA;IAoCAC;MACA;IACA,CAtCA;IAuCAC;MACA;IACA,CAzCA;IA0CAC;MACA;IACA,CA5CA;IA6CAC,YA7CA,0BA6CA;MAAA;;MACA;QACAC,mBADA;QAEAnB,yBAFA;QAGAC,+BAHA;QAIAC,mBAJA;QAKAC,eALA;QAMAC,mBANA;QAOAC,iBAPA;QAQAe;MARA;MAUA;QACAC;MADA;MAGAT;MACAD,MACAW,IADA,CACA,QADA,EACAjC,IADA,EACA;QACAkC;MADA,CADA,EAIAC,IAJA,CAIA;QACA;UAAA;QAAA;;QACAZ;MACA,CAPA,WAQA;QACAA;MACA,CAVA;IAWA;EAvEA;AAvBA","names":["data","mode","registerRes","mode1","checkbox","visiblePass","type","form","email","password","name","firstname","denomination","street","city","postal","phone","showError","methods","mapActions","submit","register","axios","console","alert","goToHome","switchToCreateAccount","switchToLogin","switchToinfos","handleSubmit","lastname","userId","authorization","post","headers","then"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\n  <v-row style=\"height: 100%\" no-gutters>\n    <v-col cols=\"5\">\n      <v-img\n        class=\"login-col fill-height d-flex justify-center align-center\"\n        src=\"../assets/rect375.png\"\n      ></v-img>\n    </v-col>\n    <v-col\n      cols=\"7\"\n      class=\"login-col fill-height d-flex justify-center align-center\"\n    >\n      <v-card color=\"transparent\" elevation=\"0\" class=\"connection-card\">\n        <v-card-title\n          v-if=\"mode == 'login'\"\n          class=\"connection-title font-weight-black pl-0\"\n        >\n          Se Connecter\n        </v-card-title>\n        <v-card-title v-else class=\"connection-title font-weight-black pl-0\">\n          S'inscrire\n        </v-card-title>\n        <div>\n          <div class=\"pt-8\" v-if=\"mode == 'login'\">\n            <p class=\"mb-2 text-field-title\">Identifiant / E-mail</p>\n            <v-text-field\n              outlined\n              prepend-inner-icon=\"mdi-account-outline\"\n              hide-details=\"true\"\n              v-model=\"form.email\"\n            ></v-text-field>\n            <p class=\"mt-1 text-right caption text-decoration-underline\">\n              Identifiant oublié ?\n            </p>\n            <div>\n              <p class=\"mb-2 text-field-title\">Mot de Passe</p>\n              <v-text-field\n                outlined\n                prepend-inner-icon=\"mdi-key-outline\"\n                :append-icon=\"\n                  visiblePass ? 'mdi-eye-outline' : 'mdi-eye-off-outline'\n                \"\n                hide-details=\"true\"\n                :type=\"visiblePass ? 'password' : ''\"\n                @click:append=\"visiblePass = !visiblePass\"\n                v-model=\"form.password\"\n              ></v-text-field>\n              <p class=\"mt-1 text-right caption text-decoration-underline\">\n                Mot de passe oublié ?\n              </p>\n            </div>\n          </div>\n          <div v-else-if=\"mode == 'create'\">\n            <div class=\"pt-6\">\n              <p class=\"mb-2 text-field-title\">Email</p>\n              <v-text-field\n                outlined\n                prepend-inner-icon=\"mdi-email\"\n                hide-details=\"true\"\n                v-model=\"form.email\"\n              ></v-text-field>\n            </div>\n\n            <div class=\"pt-8\">\n              <p class=\"mb-2 text-field-title\">Mot de Passe</p>\n              <v-text-field\n              outlined\n                prepend-inner-icon=\"mdi-key-outline\"\n                :append-icon=\"\n                  visiblePass ? 'mdi-eye-outline' : 'mdi-eye-off-outline'\n                \"\n                hide-details=\"true\"\n                :type=\"visiblePass ? 'password' : ''\"\n                @click:append=\"visiblePass = !visiblePass\"\n                v-model=\"form.password\"\n              ></v-text-field>\n            </div>\n          </div>\n          <div v-else>\n            <v-row>\n              <v-col>\n                <div class=\"pt-8\">\n                  <p class=\"mb-2 text-field-title\">Nom</p>\n                  <v-text-field\n                    hide-details=\"true\"\n                    v-model=\"name\"\n                    outlined\n                  ></v-text-field>\n                </div>\n              </v-col>\n              <v-col>\n                <div class=\"pt-8\">\n                  <p class=\"mb-2 text-field-title\">Prénom</p>\n                  <v-text-field\n                    outlined\n                    hide-details=\"true\"\n                    v-model=\"firstname\"\n                  ></v-text-field>\n                </div>\n              </v-col>\n            </v-row>\n            <div class=\"pt-8\">\n              <p class=\"mb-2 text-field-title\">Dénomination</p>\n              <v-text-field\n                outlined\n                prepend-inner-icon=\"mdi-briefcase\"\n                hide-details=\"true\"\n                v-model=\"denomination\"\n              ></v-text-field>\n            </div>\n\n            <div class=\"pt-6\">\n              <p class=\"mb-2 text-field-title\">Rue</p>\n              <v-text-field\n                outlined\n                prepend-inner-icon=\"mdi-account-outline\"\n                hide-details=\"true\"\n                v-model=\"street\"\n              ></v-text-field>\n            </div>\n\n            <v-row>\n              <v-col>\n                <div class=\"pt-6\">\n                  <p class=\"mb-2 text-field-title\">Code Postal</p>\n                  <v-text-field\n                    outlined\n                    prepend-inner-icon=\"mdi-account-outline\"\n                    hide-details=\"true\"\n                    v-model=\"postal\"\n                  ></v-text-field>\n                </div>\n              </v-col>\n              <v-col>\n                <div class=\"pt-6\">\n                  <p class=\"mb-2 text-field-title\">Commune</p>\n                  <v-text-field\n                    outlined\n                    prepend-inner-icon=\"mdi-account-outline\"\n                    hide-details=\"true\"\n                    v-model=\"city\"\n                  ></v-text-field>\n                </div>\n              </v-col>\n            </v-row>\n            <div class=\"pt-6\">\n              <p class=\"mb-2 text-field-title\">Téléphone</p>\n              <v-text-field\n                outlined\n                prepend-inner-icon=\"mdi-phone\"\n                hide-details=\"true\"\n                v-model=\"phone\"\n              ></v-text-field>\n            </div>\n          </div>\n        </div>\n        <div class=\"pt-8\">\n          <v-checkbox v-model=\"checkbox\" dense class=\"ma-0\" color=\"secondary\">\n            <template v-slot:label>\n              <div class=\"caption ml-n2\">Rester connecté</div>\n            </template>\n          </v-checkbox>\n          <div class=\"mt-n6\">\n            <v-btn\n              v-if=\"mode == 'login'\"\n              block\n              elevation=\"1\"\n              class=\"my-4 py-8 no-uppercase\"\n              color=\"secondary\"\n              @click=\"submit\"\n            >\n              <div class=\"font-weight-bold button-text\">Se Connecter</div>\n            </v-btn>\n            <v-btn\n              v-else-if=\"mode == 'infos'\"\n              block\n              elevation=\"1\"\n              class=\"my-4 py-8 no-uppercase\"\n              color=\"secondary\"\n              @click=\"\n                handleSubmit();\n                goToHome();\n              \"\n            >\n              <div class=\"font-weight-bold button-text\">Valider</div>\n            </v-btn>\n            <v-btn\n              v-else\n              block\n              elevation=\"1\"\n              class=\"my-4 py-8 no-uppercase\"\n              color=\"secondary\"\n              @click=\"\n                register();\n               \n              \"\n            >\n              <div class=\"font-weight-bold button-text\">Valider</div>\n            </v-btn>\n            <!-- <v-btn\n              v-if=\"mode == 'login'\"\n              block\n              elevation=\"1\"\n              class=\"my-4 py-8 white--text no-uppercase\"\n              @click=\"switchToCreateAccount()\"\n              color=\"#2C2C2C\"\n            >\n              <div class=\"button-text font-weight-bold\">S'inscrire</div>\n            </v-btn> -->\n            <v-btn\n              v-else\n              block\n              elevation=\"1\"\n              class=\"my-4 py-8 white--text no-uppercase\"\n              @click=\"switchToLogin()\"\n              color=\"#2C2C2C\"\n            >\n              <div class=\"button-text font-weight-bold\">Retour</div>\n            </v-btn>\n          </div>\n        </div>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { mapActions } from \"vuex\";\nexport default {\n  data: () => ({\n    mode: \"login\",\n    registerRes:{},\n    mode1: \"data\",\n    checkbox: false,\n    visiblePass: true,\n    type: \"password\",\n    form: {\n      email: \"\",\n      password: \"\",\n    },\n\n    name: \"\",\n    firstname: \"\",\n    denomination: \"\",\n    street: \"\",\n    city: \"\",\n    postal: \"\",\n    phone: \"\",\n\n    showError: false,\n  }),\n  methods: {\n    ...mapActions([\"LogIn\"]),\n    async submit() {\n      try {\n        await this.LogIn(this.form);\n        this.$router.push(\"/Dashboard\");\n        this.showError = false;\n      } catch (error) {\n        this.showError = true;\n      }\n    },\n  //  ...mapActions([\"Register\"]),\n     register() {\n      \n         axios.post(\"user/signup\", this.form).then(res=>{\n          this.registerRes=res.data;\n        console.log(this.registerRes,\"register response\");\n        //this.$router.push(\"/Dashboard\");\n        this.showError = false;\n        this.switchToinfos();\n         }).catch(e=>{\n          alert(\"Something went wrong in registration\")\n          this.showError = true;\n         })\n        \n    \n    },\n    async goToHome() {\n      try {\n        await this.LogIn(this.form);\n        this.$router.push(\"/Dashboard\");\n        this.showError = false;\n      } catch (error) {\n        this.showError = true;\n      }\n    },\n    switchToCreateAccount: function () {\n      this.mode = \"create\";\n    },\n    switchToLogin: function () {\n      this.mode = \"login\";\n    },\n    switchToinfos: function () {\n      this.mode = \"infos\";\n    },\n    handleSubmit() {\n      const data = {\n        lastname: this.name,\n        firstname: this.firstname,\n        denomination: this.denomination,\n        street: this.street,\n        city: this.city,\n        postal: this.postal,\n        phone: this.phone,\n        userId:this.registerRes.userId\n      };\n      const headers = {\n          authorization: \"Bearer \" + this.registerRes.token,\n        };\n      console.log(data);\n      axios\n        .post(\"/fiche\",data,{\n          headers,\n        })\n        .then((res) => {\n          this.submit().catch((e)=>console.error(e));\n          console.log(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.background {\n  height: 100%;\n}\n.login-col {\n  background: linear-gradient(\n    132.92deg,\n    rgba(49, 54, 203, 0.15) 0.01%,\n    rgba(142, 80, 222, 0.15) 27.08%,\n    rgba(124, 93, 155, 0.15) 55.73%,\n    rgba(110, 102, 203, 0.15) 85.25%,\n    rgba(49, 54, 203, 0.15) 100%\n  );\n}\n.connection-card {\n  width: 55%;\n}\n.connection-title {\n  font-size: 37px !important;\n}\n.no-uppercase {\n  text-transform: unset !important;\n}\n.text-field-title {\n  font-size: 18px;\n}\n.button-text {\n  font-size: 20px;\n}\n.v-text-field input {\n  margin-left: 10px !important;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}