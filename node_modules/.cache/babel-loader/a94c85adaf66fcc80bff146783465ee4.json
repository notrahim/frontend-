{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport axios from 'axios';\nexport default {\n  props: [\"id\"],\n  data: function data() {\n    return {\n      mode: true,\n      siren: null,\n      pappers_res: [],\n      pappers_data: [],\n      etablissements: [],\n      sirenRules: [function (v) {\n        return v && v.length == 9 || 'SIREN has 9 digits';\n      }]\n    };\n  },\n  computed: {\n    filteredData: function filteredData() {\n      return this.pappers_res.etablissements ? this.pappers_res.etablissements.filter(function (g) {\n        return g.etablissement_cesse == false;\n      }) : [];\n    },\n    postData: function postData() {\n      var data = {\n        ancien_etab_rue: this.pappers_data.adresse_ligne_1,\n        ancien_etab_zip: this.pappers_data.code_postal,\n        ancien_etab_ville: this.pappers_data.ville,\n        siren: this.siren\n      };\n      return data;\n    }\n  },\n  methods: {\n    mapData: function mapData() {\n      console.log('test');\n    },\n    to_results: function to_results() {\n      this.mode = false;\n    },\n    get_back: function get_back() {\n      this.mode = true;\n    },\n    get_siren: function get_siren() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var pappers_res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios.get(\"https://api.pappers.fr/v2/entreprise?api_token=e0fdd0b00bf09b45a56d8bfcba777cbcbe718d0cc63716d9&siren=\".concat(_this.siren));\n\n              case 3:\n                pappers_res = _context.sent;\n                _this.pappers_res = pappers_res.data;\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 7]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;AA2BA;AAEA;EACAA,aADA;EAEAC,IAFA,kBAEA;IACA;MACAC,UADA;MAEAC,WAFA;MAGAC,eAHA;MAIAC,gBAJA;MAKAC,kBALA;MAMAC;QAAA;MAAA;IANA;EAQA,CAXA;EAYAC;IACAC,YADA,0BACA;MACA,yCACA;QACA;MACA,CAFA,CADA,GAIA,EAJA;IAKA,CAPA;IAQAC,QARA,sBAQA;MACA;QACAC,kDADA;QAEAC,8CAFA;QAGAC,0CAHA;QAIAV;MAJA;MAMA;IACA;EAhBA,CAZA;EA8BAW;IACAC,OADA,qBACA;MACAC;IACA,CAHA;IAIAC,UAJA,wBAIA;MACA;IACA,CANA;IAOAC,QAPA,sBAOA;MACA;IACA,CATA;IAUAC,SAVA,uBAUA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAC,uIAFA;;cAAA;gBAEAhB,WAFA;gBAGA;gBAHA;gBAAA;;cAAA;gBAAA;gBAAA;gBAKAY;;cALA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAOA;EAjBA;AA9BA","names":["props","data","mode","siren","pappers_res","pappers_data","etablissements","sirenRules","computed","filteredData","postData","ancien_etab_rue","ancien_etab_zip","ancien_etab_ville","methods","mapData","console","to_results","get_back","get_siren","axios"],"sourceRoot":"src/components/popup/popup","sources":["Siren.vue"],"sourcesContent":["<template>\n    <v-row>\n      <v-col>\n      <v-card-text>\n        <v-row v-if=\"mode\">\n          <v-text-field label=\"Entrez le SIREN\" v-model=\"siren\" dense :rules=\"sirenRules\" outlined></v-text-field>\n          <v-btn \n          @click=\"\n          get_siren();\n          to_results()\"> chercher\n          </v-btn>\n        </v-row>\n\n        <v-row v-else>\n          <v-select @change=\"postData()\" v-model=\"pappers_data\"\n          :items=\"filteredData\" label=\"Etablissements\" :item-text=\"\n          (item) => item.adresse_ligne_1 + '-' + item.code_postal + '-' + item.ville\" return-object>\n          </v-select>\n          <v-btn\n          @click=\"get_back()\">Retour</v-btn>\n        </v-row>\n      </v-card-text>\n    </v-col>\n  </v-row>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    props: [\"id\"],\n    data() {\n      return {\n        mode: true,\n        siren: null,\n        pappers_res: [],\n        pappers_data: [],\n        etablissements: [],\n        sirenRules: [v => (v && v.length == 9) || 'SIREN has 9 digits']\n      };\n    },\n    computed: {\n      filteredData() {\n        return this.pappers_res.etablissements\n          ? this.pappers_res.etablissements.filter((g) => {\n            return g.etablissement_cesse == false;\n          })\n          : [];\n      },\n      postData() {\n      let data = {\n        ancien_etab_rue: this.pappers_data.adresse_ligne_1,\n        ancien_etab_zip: this.pappers_data.code_postal,\n        ancien_etab_ville: this.pappers_data.ville,\n        siren: this.siren\n      };\n      return data;\n      },\n    },\n    methods: {\n      mapData() {\n        console.log('test')\n      },\n      to_results() {\n        this.mode = false\n      },\n      get_back() {\n        this.mode = true\n      },\n      async get_siren() {\n        try {\n          let pappers_res = await axios.get(`https://api.pappers.fr/v2/entreprise?api_token=e0fdd0b00bf09b45a56d8bfcba777cbcbe718d0cc63716d9&siren=${this.siren}`)\n          this.pappers_res = pappers_res.data\n        } catch (err) {\n          console.log(err)\n        }\n      }\n    },\n  };\n  </script>"]},"metadata":{},"sourceType":"module"}