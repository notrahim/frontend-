{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Techdotpk/Desktop/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport axios from \"axios\";\nimport SummaryCard from \"./SummaryCard.vue\";\nexport default {\n  props: ['propz'],\n  components: {\n    SummaryCard: SummaryCard\n  },\n  data: function data() {\n    return {\n      summaryCards: [{\n        value: [],\n        type: \"formalités en attente\",\n        icon: \"mdi-paperclip\",\n        color: \"accent\"\n      }, {\n        value: [],\n        type: \"alertes<br/>à venir\",\n        icon: \"mdi-bell-ring-outline\",\n        color: \"accent\"\n      }, {\n        type: \"Créer demande de régularisation\",\n        icon: \"mdi-plus\",\n        color: \"secondary\"\n      }, {\n        value: 3,\n        type: \"demandes<br/>de<br/>régularisation\",\n        icon: \"mdi-clock-time-five-outline\",\n        color: \"accent\"\n      }]\n    };\n  },\n  test: '',\n  alert: [],\n  status: '',\n  mounted: function mounted() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.fetchData();\n\n            case 2:\n              _this.summaryCards[1].value.push(_this.alert.length);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  computed: {\n    deadline: function deadline() {\n      var d = new Date();\n      d.setDate(d.getDate() + 30);\n      return d.toISOString();\n    },\n    today: function today() {\n      var d = new Date();\n      return d.toISOString();\n    }\n  },\n  methods: {\n    fetchData: function fetchData() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var headers, formalite_pending;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                headers = {\n                  authorization: \"Bearer \" + _this2.$store.state.auth.user.token\n                };\n                _context2.next = 4;\n                return axios.get(\"task\", {\n                  headers: headers\n                });\n\n              case 4:\n                formalite_pending = _context2.sent;\n                _this2.eventsObjects = formalite_pending.data.map(function (value) {\n                  return {\n                    date: value.day,\n                    status: value.status\n                  };\n                });\n                _this2.alert = _this2.eventsObjects.filter(function (value) {\n                  return _this2.today < value.date && value.date < _this2.deadline;\n                });\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;AAwBA;AACA;AACA;EACAA,gBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC;IAAA;MACAC,eACA;QACAC,SADA;QAEAC,6BAFA;QAGAC,qBAHA;QAIAC;MAJA,CADA,EAOA;QACAH,SADA;QAEAC,2BAFA;QAGAC,6BAHA;QAIAC;MAJA,CAPA,EAcA;QACAF,uCADA;QAEAC,gBAFA;QAGAC;MAHA,CAdA,EAmBA;QACAH,QADA;QAEAC,0CAFA;QAGAC,mCAHA;QAIAC;MAJA,CAnBA;IADA;EAAA,CAHA;EA+BAC,QA/BA;EAgCAC,SAhCA;EAiCAC,UAjCA;EAmCAC,OAnCA,qBAmCA;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA,iBADA;;YAAA;cAEA;;YAFA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAGA,CAtCA;EAuCAC;IACAC,QADA,sBACA;MACA;MACAC;MACA;IACA,CALA;IAMAC,KANA,mBAMA;MACA;MACA;IACA;EATA,CAvCA;EAkDAC;IACAC,SADA,uBACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC,OAFA,GAEA;kBACAC;gBADA,CAFA;gBAAA;gBAAA,OAKAC;kBACAF;gBADA,EALA;;cAAA;gBAKAG,iBALA;gBAQA,mEACA;kBACA;oBACAC,eADA;oBAEAZ;kBAFA;gBAIA,CANA;gBAOA;kBAAA;gBAAA;gBAfA;gBAAA;;cAAA;gBAAA;gBAAA;gBAiBAa;;cAjBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAoBA;EArBA;AAlDA","names":["props","components","SummaryCard","data","summaryCards","value","type","icon","color","test","alert","status","mounted","computed","deadline","d","today","methods","fetchData","headers","authorization","axios","formalite_pending","date","console"],"sourceRoot":"src/components/widget/Summary","sources":["SummaryBoard.vue"],"sourcesContent":["```<template>\n  <v-card color=\"transparent\" elevation=\"0\">\n    <v-card-title class=\"font-weight-black\" style=\"font-size: 20px\"\n      >Tableau de bord</v-card-title>\n      \n    <v-row class=\"py-0\">\n      <v-col\n        v-for=\"(card, i) in summaryCards\"\n        :key=\"i\"\n        cols=\"5\"\n        class=\"px-0 py-2 d-flex justify-center\"\n      >\n        <summary-card\n          :value=\"card.value\"\n          :type=\"card.type\"\n          :icon=\"card.icon\"\n          :color=\"card.color\"\n        />\n      </v-col>\n    </v-row>\n  </v-card>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport SummaryCard from \"./SummaryCard.vue\";\nexport default {\n  props: ['propz'],\n  components: { SummaryCard },\n  data: () => ({\n      summaryCards: [\n      {\n        value: [],\n        type: \"formalités en attente\",\n        icon: \"mdi-paperclip\",\n        color: \"accent\",\n      },\n      {\n        value: [],\n        type : \"alertes<br/>à venir\" ,\n        icon: \"mdi-bell-ring-outline\",\n        color: \"accent\",\n        \n      },\n      {\n        type: \"Créer demande de régularisation\",\n        icon: \"mdi-plus\",\n        color: \"secondary\",\n      },\n      {\n        value: 3,\n        type: \"demandes<br/>de<br/>régularisation\",\n        icon: \"mdi-clock-time-five-outline\",\n        color: \"accent\",\n      },\n    ],\n  }),\n  test: '',\n      alert:[],\n      status:'',\n\n   async mounted() {\n         await this.fetchData()\n         this.summaryCards[1].value.push(this.alert.length )\n    },\n    computed: {\n  deadline() {\n    const d = new Date()\n    d.setDate(d.getDate() + 30)\n    return d.toISOString()\n  },\n  today() {\n    const d = new Date()\n    return d.toISOString()\n  }\n},\n    methods: {\n      async fetchData() {\n        try {\n          const headers = {\n            authorization: \"Bearer \" + this.$store.state.auth.user.token,\n          };\n          let formalite_pending = await axios.get(\"task\" ,  {\n            headers,\n          });\n          this.eventsObjects = formalite_pending.data.map(function (value) \n          {\n          return {\n            date : value.day,\n            status: value.status,\n          };\n        });\n        this.alert = this.eventsObjects.filter((value) => this.today < value.date  && value.date < this.deadline )\n        }catch (error) {\n            console.log(error)\n        }\n  \n      },\n      \n    },\n\n};\n</script>\n```"]},"metadata":{},"sourceType":"module"}